<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pixel Tic Tac Toe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: monospace; background: #f1f1f1; display: flex; flex-direction: column; align-items: center; }
    #game { display: grid; grid-template-columns: repeat(3, 60px); grid-template-rows: repeat(3, 60px); gap: 6px; margin: 30px 0; }
    .cell { width: 60px; height: 60px; font-size: 2rem; text-align: center; background: #fff; border: 2px solid #aaa; cursor: pointer; }
    .cell.winner { background: #c0ffc0; }
    #status { margin: 10px; }
    #reset { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Pixel Tic Tac Toe</h1>
  <div id="status">Your turn!</div>
  <div id="game"></div>
  <button id="reset">Restart</button>
  <script>
    const gameBoard = document.getElementById('game');
    const statusText = document.getElementById('status');
    const resetBtn = document.getElementById('reset');

    let board = Array(9).fill('');
    let currentPlayer = 'X'; // Player is always 'X', computer is 'O'
    let gameActive = true;
    let winLine = [];

    function renderBoard() {
      gameBoard.innerHTML = '';
      board.forEach((cell, idx) => {
        const div = document.createElement('button');
        div.className = 'cell';
        div.innerText = cell;
        div.disabled = !gameActive || cell !== '' || currentPlayer !== 'X';
        if (winLine.includes(idx)) div.classList.add('winner');
        div.addEventListener('click', () => handleMove(idx));
        gameBoard.appendChild(div);
      });
    }

    function handleMove(idx) {
      if (!gameActive || board[idx] !== '' || currentPlayer !== 'X') return;
      winLine = [];
      board[idx] = 'X';
      renderBoard();
      const won = checkWin(board, 'X');
      if (won) {
        winLine = won;
        renderBoard();
        statusText.innerText = `You win!`;
        gameActive = false;
      } else if (board.every(cell => cell !== '')) {
        statusText.innerText = "It's a draw!";
        gameActive = false;
      } else {
        currentPlayer = 'O';
        statusText.innerText = `Computer's turn...`;
        setTimeout(computerMove, 400);
      }
    }

    function computerMove() {
      if (!gameActive) return;
      winLine = [];
      const emptyCells = board.map((cell, idx) => cell === '' ? idx : null).filter(idx => idx !== null);
      if (emptyCells.length === 0) return;
      const moveIdx = emptyCells[Math.floor(Math.random() * emptyCells.length)];
      board[moveIdx] = 'O';
      renderBoard();
      const won = checkWin(board, 'O');
      if (won) {
        winLine = won;
        renderBoard();
        statusText.innerText = `Computer wins!`;
        gameActive = false;
      } else if (board.every(cell => cell !== '')) {
        statusText.innerText = "It's a draw!";
        gameActive = false;
      } else {
        currentPlayer = 'X';
        statusText.innerText = `Your turn!`;
      }
    }

    function checkWin(b, p) {
      const winPatterns = [
        [0,1,2],[3,4,5],[6,7,8], // rows
        [0,3,6],[1,4,7],[2,5,8], // cols
        [0,4,8],[2,4,6]          // diags
      ];
      for (let pattern of winPatterns) {
        if (pattern.every(i => b[i] === p)) return pattern;
      }
      return false;
    }

    resetBtn.onclick = function() {
      board = Array(9).fill('');
      currentPlayer = 'X';
      gameActive = true;
      winLine = [];
      statusText.innerText = `Your turn!`;
      renderBoard();
    };

    renderBoard();
  </script>
</body>
</html>
