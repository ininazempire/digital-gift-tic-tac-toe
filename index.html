<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pixel Tic Tac Toe ‚ù§Ô∏è Proposal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Press Start 2P', Arial, sans-serif;
      background: linear-gradient(135deg, #ffe1f5 0%, #c4faf6 100%);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    h1 {
      color: #ff69b4;
      text-shadow: 2px 2px 0 #fff, 4px 4px 0 #c4faf6;
      margin-top: 24px;
      font-size: 1.7rem;
      letter-spacing: 2px;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 4vw;
      width: 94vw;
      max-width: 340px;
      aspect-ratio: 1 / 1;
      margin: 18px auto 4px auto;
      padding: 3vw;
      background: #ffe1f5;
      border-radius: 10px;
      box-shadow: 0 2px 16px #ff69b433, 0 0 0 6px #ff69b422;
      border: 3px solid #c4faf6;
      position: relative;
    }
    .cell {
      width: 100%;
      height: 100%;
      min-width: 60px;
      min-height: 60px;
      background: #fff8fc;
      font-family: 'Press Start 2P', Arial, sans-serif;
      font-size: 7vw;
      color: #ff69b4;
      border: 3px solid #aee1f9;
      border-radius: 0;
      box-shadow: 0 6px 0 0 #c4faf6, 0 0 0 2px #ff69b4 inset;
      cursor: pointer;
      outline: none;
      position: relative;
      transition: background 0.2s, box-shadow 0.15s;
      image-rendering: pixelated;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      aspect-ratio: 1 / 1;
    }
    .cell:active {
      background: #ffe1f5;
      box-shadow: 0 2px 0 0 #c4faf6, 0 0 0 2px #ff69b4 inset;
    }
    .cell.winner {
      background: #ffe1f5;
      color: #f95fa3;
      box-shadow: 0 0 0 6px #f95fa3 inset, 0 10px 0 0 #ffe1f5;
      animation: winPop 0.5s;
    }
    @keyframes winPop {
      0% { transform: scale(1.1); }
      80% { transform: scale(1.0); }
      100% { transform: scale(1); }
    }
    #status {
      font-size: 1rem;
      margin-bottom: 8px;
      color: #666;
      font-family: 'Press Start 2P', Arial, sans-serif;
      letter-spacing: 1px;
      text-align: center;
    }
    #reset {
      margin: 12px 0 0 0;
      padding: 8px 20px;
      background: #ff69b4;
      color: #fff;
      border: 3px solid #aee1f9;
      font-family: 'Press Start 2P', Arial, sans-serif;
      font-size: 1rem;
      border-radius: 0;
      cursor: pointer;
      box-shadow: 0 3px 0 0 #c4faf6;
      transition: background 0.2s, box-shadow 0.2s;
    }
    #reset:active {
      background: #f95fa3;
      box-shadow: 0 1px 0 0 #c4faf6;
    }
    @media (max-width: 600px) {
      h1 { font-size: 1.2rem; }
      #status { font-size: 0.9rem; }
      #game {
        width: 98vw;
        max-width: 99vw;
        gap: 2vw;
        padding: 0.5vw;
        border-width: 2px;
      }
      .cell {
        font-size: 9vw;
        min-width: 48px;
        min-height: 48px;
      }
      #reset {
        font-size: 0.9rem;
        padding: 6px 14px;
      }
    }
    /* Pixel Proposal Popup */
    #popup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(255, 193, 240, 0.7);
      justify-content: center;
      align-items: center;
      z-index: 9999;
      font-family: 'Press Start 2P', Arial, sans-serif;
    }
    #popup-content {
      background: #fff8fc;
      border: 6px solid #ff69b4;
      border-radius: 0;
      box-shadow: 0 6px 36px #ff69b455;
      padding: 32px 18px;
      max-width: 95vw;
      text-align: center;
      color: #ff69b4;
      font-size: 1rem;
      position: relative;
      image-rendering: pixelated;
      animation: popupIn 0.5s;
    }
    @keyframes popupIn {
      0% { transform: scale(0.8); opacity: 0;}
      100% { transform: scale(1); opacity: 1;}
    }
    .popup-heart {
      display: block;
      margin: 0 auto 18px auto;
      width: 52px;
      height: 52px;
      background: url('data:image/svg+xml;utf8,<svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="52" height="52" fill="none"/><path d="M26 43C26 43 7 29.5 7 17.5C7 10 14 7 20 10C22.5 11.5 26 15.5 26 15.5C26 15.5 29.5 11.5 32 10C38 7 45 10 45 17.5C45 29.5 26 43 26 43Z" fill="%23ff69b4" stroke="%23e05497" stroke-width="2"/></svg>') no-repeat center center / contain;
      image-rendering: pixelated;
    }
    #popup-content h2 {
      font-size: 1.3rem;
      margin: 0 0 10px 0;
      color: #f95fa3;
      text-shadow: 2px 2px #ffe1f5;
      letter-spacing: 1px;
    }
    #popup-content p {
      color: #ff69b4;
      font-size: 0.9rem;
      margin-bottom: 10px;
      line-height: 1.5;
      letter-spacing: 1px;
    }
    #close-popup {
      margin-top: 18px;
      padding: 8px 24px;
      background: #ff69b4;
      color: #fff;
      border: 3px solid #aee1f9;
      font-family: 'Press Start 2P', Arial, sans-serif;
      font-size: 1rem;
      border-radius: 0;
      cursor: pointer;
      box-shadow: 0 2px 0 0 #c4faf6;
      transition: background 0.2s;
    }
    #close-popup:hover {
      background: #f95fa3;
    }
  </style>
</head>
<body>
  <h1>Pixel Tic Tac Toe</h1>
  <div id="status">Your turn!</div>
  <div id="game"></div>
  <button id="reset">RESTART</button>
  <div id="popup">
    <div id="popup-content">
      <span class="popup-heart"></span>
      <h2>Will You Be My Pixel Player 2? üíñ</h2>
      <p>
        Just like in this pixel game,<br>
        life is much brighter and sweeter when played together.<br>
        <strong>So... will you make your move and say YES<br>
        to a lifetime of love and fun adventures with me?</strong>
      </p>
      <button id="close-popup">YES! Let's Win Together üíç</button>
    </div>
  </div>
  <script>
    const gameBoard = document.getElementById('game');
    const statusText = document.getElementById('status');
    const resetBtn = document.getElementById('reset');
    const popup = document.getElementById('popup');
    const closePopup = document.getElementById('close-popup');

    let board = Array(9).fill('');
    let gameActive = true;
    let winLine = [];

    function renderBoard() {
      gameBoard.innerHTML = '';
      board.forEach((cell, idx) => {
        const div = document.createElement('button');
        div.className = 'cell';
        div.innerText = cell;
        div.disabled = !gameActive || cell !== '' || currentPlayer() !== 'X';
        if (winLine.includes(idx)) div.classList.add('winner');
        div.addEventListener('click', () => handleMove(idx));
        gameBoard.appendChild(div);
      });
    }

    function currentPlayer() {
      // X always starts, O is AI. Count number of X's and O's to determine turn.
      const xCount = board.filter(v => v === 'X').length;
      const oCount = board.filter(v => v === 'O').length;
      return xCount === oCount ? 'X' : 'O';
    }

    function handleMove(idx) {
      if (!gameActive || board[idx] !== '' || currentPlayer() !== 'X') return;
      board[idx] = 'X';
      renderBoard();
      const won = checkWin(board, 'X');
      if (won) {
        winLine = won;
        renderBoard();
        statusText.innerText = `You win!`;
        gameActive = false;
        setTimeout(showProposal, 900);
      } else if (board.every(cell => cell !== '')) {
        statusText.innerText = "It's a draw!";
        gameActive = false;
        setTimeout(showProposal, 900);
      } else {
        statusText.innerText = `My turn...`;
        setTimeout(computerMove, 600);
      }
    }

    function computerMove() {
      if (!gameActive) return;
      const emptyCells = board
        .map((cell, idx) => cell === '' ? idx : null)
        .filter(idx => idx !== null);
      if (emptyCells.length === 0) return;
      const moveIdx = emptyCells[Math.floor(Math.random() * emptyCells.length)];
      board[moveIdx] = 'O';
      renderBoard();
      const won = checkWin(board, 'O');
      if (won) {
        winLine = won;
        renderBoard();
        statusText.innerText = `Computer wins!`;
        gameActive = false;
        setTimeout(showProposal, 900);
      } else if (board.every(cell => cell !== '')) {
        statusText.innerText = "It's a draw!";
        gameActive = false;
        setTimeout(showProposal, 900);
      } else {
        statusText.innerText = `Your turn!`;
      }
    }

    function checkWin(b, p) {
      const winPatterns = [
        [0,1,2],[3,4,5],[6,7,8], // rows
        [0,3,6],[1,4,7],[2,5,8], // cols
        [0,4,8],[2,4,6]          // diags
      ];
      for (let pattern of winPatterns) {
        if (pattern.every(i => b[i] === p)) return pattern;
      }
      return false;
    }

    function showProposal() {
      popup.style.display = 'flex';
    }
    closePopup.onclick = function() {
      popup.style.display = 'none';
    };
    resetBtn.onclick = function() {
      board = Array(9).fill('');
      gameActive = true;
      winLine = [];
      statusText.innerText = `Your turn!`;
      renderBoard();
      popup.style.display = 'none';
    };

    // Initial render
    renderBoard();
  </script>
</body>
</html>



